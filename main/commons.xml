<?xml version="1.0" encoding="UTF-8"?>


<project name="commons">


    <property name="phing.commons.root" value="/srv/phing"/>


    <loadfile property="phing.commons.version" file="${phing.commons.root}/VERSION"/>
    <php function="trim" returnProperty="phing.commons.version" level="debug">
        <param value="${phing.commons.version}"/>
    </php>


    <echo message=""/>
    <echo message="****************************************************************************************************"/>
    <echo message="*"/>
    <echo message="*         .__    .__                "/>
    <echo message="*  ______ |  |__ |__| ____    ____  "/>
    <echo message="*  \____ \|  |  \|  |/    \  / ___\ "/>
    <echo message="*  |  |_> >   Y  \  |   |  \/ /_/  >"/>
    <echo message="*  |   __/|___|  /__|___|  /\___  / "/>
    <echo message="*  |__|        \/        \//_____/  "/>
    <echo message="*"/>
    <echo message="*    ____  ____   _____   _____   ____   ____   ______"/>
    <echo message="*  _/ ___\/  _ \ /     \ /     \ /  _ \ /    \ /  ___/"/>
    <echo message="*  \  \__(  &lt;_&gt; )  Y Y  \  Y Y  (  &lt;_&gt; )   |  \\___ \ "/>
    <echo message="*   \___  >____/|__|_|  /__|_|  /\____/|___|  /____  >"/>
    <echo message="*       \/            \/      \/            \/     \/ "/>
    <echo message="*"/>
    <echo message="*  ${phing.commons.version}"/>
    <echo message="*"/>
    <echo message="*  elnebuloso/phing-commons"/>
    <echo message="*"/>
    <echo message="****************************************************************************************************"/>
    <echo message=""/>


    <php function="dirname" returnProperty="project.root" level="debug">
        <param value="${phing.file}"/>
    </php>
    <resolvepath propertyName="project.root" file="${project.root}"/>


    <loadfile property="project.version" file="${project.root}/VERSION"/>
    <php function="trim" returnProperty="project.version" level="debug">
        <param value="${project.version}"/>
    </php>


    <property name="project.build" value="${project.root}/build"/>
    <property name="project.build.tmp" value="${project.root}/build/tmp"/>
    <property name="project.build.dist" value="${project.root}/build/dist"/>
    <property name="project.build.reports" value="${project.root}/build/reports"/>


    <resolvepath propertyName="project.build" file="${project.build}"/>
    <resolvepath propertyName="project.build.tmp" file="${project.build.tmp}"/>
    <resolvepath propertyName="project.build.dist" file="${project.build.dist}"/>
    <resolvepath propertyName="project.build.reports" file="${project.build.reports}"/>


    <import file="${phing.commons.root}/commons/clean.tmp.xml"/>
    <import file="${phing.commons.root}/commons/clean.dist.xml"/>
    <import file="${phing.commons.root}/commons/clean.reports.xml"/>
    <import file="${phing.commons.root}/commons/report.phpcpd.xml"/>
    <import file="${phing.commons.root}/commons/report.phpdepend.xml"/>
    <import file="${phing.commons.root}/commons/report.phploc.xml"/>
    <import file="${phing.commons.root}/commons/report.phpmd.xml"/>


    <fail unless="project.name" message="missing project.name"/>
    <fail unless="project.version" message="missing project.version"/>


    <target name="help" depends="project:help, clean:help, report:help"/>


    <target name="project:help">
        <echo message="property        value"/>
        <echo message="----------------------------------------------------------------------------------------------------"/>
        <echo message="project.name             ${project.name}"/>
        <echo message="project.version          ${project.version}"/>
        <echo message="project.root             ${project.root}"/>
        <echo message="project.build            ${project.build}"/>
        <echo message="project.build.tmp        ${project.build.tmp}"/>
        <echo message="project.build.dist       ${project.build.dist}"/>
        <echo message="project.build.reports    ${project.build.reports}"/>
    </target>


    <target name="clean:help">
        <echo message="target           description"/>
        <echo message="----------------------------------------------------------------------------------------------------"/>
        <echo message="clean:tmp        ${clean.tmp.description}"/>
        <echo message="clean:dist       ${clean.dist.description}"/>
        <echo message="clean:reports    ${clean.reports.description}"/>
    </target>


    <target name="report:help">
        <echo message="target              description"/>
        <echo message="----------------------------------------------------------------------------------------------------"/>
        <echo message="report:phpcpd       ${report.phpcpd.description}"/>
        <echo message="report:phpdepend    ${report.phpdepend.description}"/>
        <echo message="report:phploc       ${report.phploc.description}"/>
        <echo message="report:phpmd        ${report.phpmd.description}"/>
    </target>


</project>
