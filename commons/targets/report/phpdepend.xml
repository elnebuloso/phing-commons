<?xml version="1.0" encoding="UTF-8"?>


<project default="report.phpdepend">


    <target name="report.phpdepend:init" hidden="true">
        <property name="report.phpdepend.sources" value="${project.root}/src" />
        <property name="report.phpdepend.coderank.modes" value="inheritance" />
        <property name="report.phpdepend.suffixes" value="php" />
        <property name="report.phpdepend.argline" value="" />
        <property name="report.phpdepend.out" value="${project.reports}/phpdepend" />
        <property name="report.phpdepend.xsl" value="${phing:commons:root}/resources/phpdepend/phpdepend.xsl" />
    </target>


    <target name="report.phpdepend:before" hidden="true">
        <echo message="no actions defined" level="debug" />
    </target>


    <target name="report.phpdepend:main" hidden="true">
        <delete dir="${report.phpdepend.out}" />
        <mkdir dir="${report.phpdepend.out}" />

        <exec executable="${phing:commons:root}/bin/pdepend" logoutput="false" passthru="true" level="info" checkreturn="yes">
            <arg line="--jdepend-xml=${report.phpdepend.out}/phpdepend.xml" />
            <arg line="--jdepend-chart=${report.phpdepend.out}/chart.svg" />
            <arg line="--overview-pyramid=${report.phpdepend.out}/overview-pyramid.svg" />
            <arg line="--summary-xml=${report.phpdepend.out}/summary.xml" />
            <arg line="--coderank-mode=${report.phpdepend.coderank.modes}" />
            <arg line="--suffix=${report.phpdepend.suffixes}" />
            <arg line="${report.phpdepend.argline}" />
            <arg line="${report.phpdepend.sources}" />
        </exec>

        <xslt file="${report.phpdepend.out}/phpdepend.xml" tofile="${report.phpdepend.out}/index.html" style="${report.phpdepend.xsl}" />
    </target>


    <target name="report.phpdepend:after" hidden="true">
        <echo message="no actions defined" level="debug" />
    </target>


    <target name="report.phpdepend" depends="report.phpdepend:init, report.phpdepend:before, report.phpdepend:main, report.phpdepend:after">
        <echo message="successful" />
    </target>


    <target name="report.phpdepend:help" depends="report.phpdepend:init" hidden="true">
        <echo message="PROPERTY                                          VALUE" />
        <echo message="----------------------------------------------------------------------------------------------------" />
        <echo message="report.phpdepend.out                                 ${report.phpdepend.out}" />
        <echo message="report.phpdepend.xsl                                 ${report.phpdepend.xsl}" />
        <echo message="report.phpdepend.patternset                          ${report.phpdepend.patternset}" />
    </target>


</project>